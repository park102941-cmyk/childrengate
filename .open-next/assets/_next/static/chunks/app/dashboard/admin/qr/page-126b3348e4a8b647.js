(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9589],{28620:(e,t,s)=>{Promise.resolve().then(s.bind(s,98544))},98544:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95155),l=s(12115),r=s(33084),i=s(11054),n=s(35765),c=s(44857),o=s(23920),d=s(95603),x=s(68236),h=s(92823),m=s(183),u=s(68435);function b(){let{t:e}=(0,m.o)(),{institutionId:t}=(0,u.A)(),[s,b]=(0,l.useState)("gate-XXXX"),[p,g]=(0,l.useState)("");(0,l.useEffect)(()=>{t&&b(t)},[t]),(0,l.useEffect)(()=>{{let e=window.location.origin;g("".concat(e,"/p/").concat(s))}},[s]);let f=(e,t)=>{let s=document.getElementById(e);if(!s)return;let a=new XMLSerializer().serializeToString(s),l=document.createElement("canvas"),r=l.getContext("2d"),i=new Image;i.onload=()=>{l.width=1e3,l.height=1e3,r.fillStyle="white",r.fillRect(0,0,1e3,1e3),null==r||r.drawImage(i,0,0,1e3,1e3);let e=l.toDataURL("image/png"),s=document.createElement("a");s.download=t,s.href=e,s.click()},i.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(a)))};return(0,a.jsxs)("main",{className:"flex-1 lg:ml-64 p-6 md:p-10 lg:p-14 bg-slate-50 min-h-screen",children:[(0,a.jsxs)("header",{className:"mb-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-black tracking-tight text-black mb-1",children:e.dashboard.qr.title}),(0,a.jsx)("p",{className:"text-black/50 font-semibold",children:e.dashboard.qr.subtitle})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[(0,a.jsxs)("section",{className:"bg-white rounded-[40px] border border-black/5 shadow-2xl shadow-black/5 p-10 flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6 text-black flex items-center gap-2",children:"기관 입구용 마스터 QR"}),(0,a.jsxs)(i.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-10 rounded-[40px] inline-block mb-10 relative group border-4 border-primary/10 cursor-pointer shadow-inner",onClick:()=>window.open("/p/".concat(s),"_blank"),children:[(0,a.jsx)(r.h,{id:"main-qr-code",value:p||"https://childrengate.com/p/".concat(s),size:280,level:"H",includeMargin:!0,imageSettings:{src:"/children_gate_logo.png",x:void 0,y:void 0,height:52,width:52,excavate:!0}}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-primary/80 opacity-0 group-hover:opacity-100 transition-opacity rounded-[36px] flex flex-col items-center justify-center text-white gap-3 p-4",children:[(0,a.jsx)(n.A,{size:32}),(0,a.jsx)("span",{className:"font-bold",children:"학부모 페이지 미리보기"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-sm mb-10",children:[(0,a.jsxs)("button",{onClick:()=>f("main-qr-code","KidsGate_QR_".concat(s,".png")),className:"bg-primary text-white py-4 rounded-2xl flex items-center justify-center gap-2 font-bold shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all",children:[(0,a.jsx)(c.A,{size:18}),"저장"]}),(0,a.jsxs)("button",{className:"bg-slate-100 text-slate-700 py-4 rounded-2xl flex items-center justify-center gap-2 font-bold hover:bg-slate-200 transition-all",onClick:()=>{navigator.clipboard.writeText(p),alert(e.dashboard.qr.copied||"복사되었습니다.")},children:[(0,a.jsx)(o.A,{size:18}),"복사"]}),(0,a.jsxs)("button",{className:"bg-slate-900 text-white py-4 rounded-2xl flex items-center justify-center gap-2 font-bold hover:bg-black transition-all",onClick:()=>window.print(),children:[(0,a.jsx)(d.A,{size:18}),"인쇄"]})]}),(0,a.jsxs)("div",{className:"w-full pt-8 border-t border-black/5 flex items-center justify-between text-left",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-black/40 uppercase tracking-widest mb-1",children:e.dashboard.qr.instId}),(0,a.jsx)("code",{className:"text-primary font-black text-2xl tracking-tight",children:s})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{className:"p-4 bg-slate-50 rounded-2xl hover:bg-slate-100 transition-colors border border-black/5",children:(0,a.jsx)(x.A,{className:"text-black/40",size:20})})})]})]}),(0,a.jsxs)("section",{className:"bg-slate-900 rounded-[40px] shadow-2xl shadow-primary/10 p-10 flex flex-col text-white",children:[(0,a.jsxs)("h2",{className:"text-2xl font-black mb-2 flex items-center gap-3",children:[(0,a.jsx)(h.A,{className:"text-primary"}),e.dashboard.qr.studentQrTitle||"학생 개인 QR 발급"]}),(0,a.jsx)("p",{className:"text-white/40 font-bold mb-8 text-sm",children:e.dashboard.qr.studentQrSubtitle||"학생증이나 가방에 부착할 수 있는 개인 고유 QR 코드입니다."}),(0,a.jsx)("div",{className:"flex-1 space-y-4 overflow-y-auto pr-2 max-h-[500px] custom-scrollbar",children:[{id:"S001",name:"김지우",class:"민들레반"},{id:"S002",name:"이준서",class:"해바라기반"},{id:"S003",name:"박서현",class:"장미반"}].map(e=>{let t="".concat(window.location.origin,"/scan/").concat(s,"/").concat(e.id);return(0,a.jsxs)("div",{className:"bg-white/5 rounded-3xl p-5 flex items-center gap-6 group hover:bg-white/10 transition-all border border-white/5",children:[(0,a.jsx)("div",{className:"bg-white p-2 rounded-2xl shrink-0",children:(0,a.jsx)(r.h,{id:"student-qr-".concat(e.id),value:t,size:70,level:"Q"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-white/90",children:e.name}),(0,a.jsx)("p",{className:"text-white/40 text-xs font-bold uppercase tracking-wider",children:e.class})]}),(0,a.jsx)("button",{onClick:()=>f("student-qr-".concat(e.id),"QR_".concat(e.name,".png")),className:"p-4 bg-primary/20 text-primary rounded-2xl hover:bg-primary hover:text-white transition-all shadow-inner",children:(0,a.jsx)(c.A,{size:18})})]},e.id)})}),(0,a.jsx)("div",{className:"mt-8 pt-8 border-t border-white/10",children:(0,a.jsxs)("button",{className:"w-full bg-primary py-5 rounded-3xl text-white font-black shadow-xl shadow-primary/20 flex items-center justify-center gap-2 hover:translate-y-[-2px] transition-transform",children:[(0,a.jsx)(d.A,{size:20}),"전체 학생용 QR 일괄 인쇄 (PDF)"]})})]})]})]})}},68435:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>o});var a=s(95155),l=s(12115),r=s(5877),i=s(83935),n=s(44595);let c=(0,l.createContext)({user:null,role:null,institutionId:null,loading:!0}),o=e=>{let{children:t}=e,[s,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(null),[h,m]=(0,l.useState)(null),[u,b]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{if(!n.j2)return;let e=(0,r.hg)(n.j2,async e=>{if(o(e),e&&n.db)try{let t=await (0,i.x7)((0,i.H9)(n.db,"users",e.uid));if(t.exists()){let e=t.data();x(e.role),m(e.institutionId||null)}}catch(e){console.error("Error fetching user role:",e)}else x(null),m(null);b(!1)});return()=>e()},[]),(0,a.jsx)(c.Provider,{value:{user:s,role:d,institutionId:h,loading:u},children:t})},d=()=>(0,l.useContext)(c)},44595:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j2:()=>o});var a=s(49904),l=s(5877),r=s(83935);let i={apiKey:"AIzaSyDJm5vG3oeZUUMlVZXJqxkxo_dWE9SgPCc",authDomain:"schedulo-b0491.firebaseapp.com",projectId:"schedulo-b0491",storageBucket:"schedulo-b0491.firebasestorage.app",messagingSenderId:"1067549095640",appId:"1:1067549095640:web:822a85c7d3b16ead2cc9ad"},n=null;function c(){return n||(n=(0,a.Dk)().length>0?(0,a.Sx)():(0,a.Wp)(i)),n}let o=(0,l.xI)(c()),d=(0,r.aU)(c());c()}},e=>{var t=t=>e(e.s=t);e.O(0,[7153,5563,7767,5714,6608,5032,183,8441,1517,7358],()=>t(28620)),_N_E=e.O()}]);