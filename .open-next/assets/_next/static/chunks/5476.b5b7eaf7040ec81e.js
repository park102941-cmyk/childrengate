"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5476],{99053:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(63394).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},26336:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(63394).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},86122:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(63394).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},48686:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(63394).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},66462:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(63394).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},40767:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(63394).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},76046:(e,t,a)=>{var s=a(66658);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},85476:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(95155),r=a(12115),l=a(5877),i=a(83935),n=a(44595),o=a(76046),c=a(48173),d=a.n(c),m=a(11054),x=a(86122),h=a(66462),u=a(48686),b=a(99053),p=a(40767),f=a(26336),g=a(183);function y(){let{t:e,language:t,setLanguage:a}=(0,g.o)(),[c,y]=(0,r.useState)("parent"),[k,j]=(0,r.useState)({email:"",password:""}),[w,N]=(0,r.useState)(!0),[v,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[z,M]=(0,r.useState)(!1),[P,E]=(0,r.useState)(""),[I,L]=(0,r.useState)(!1),R=(0,o.useRouter)(),F=async t=>{t.preventDefault(),A(!0),S("");try{if(!n.j2||!n.db)throw Error("Firebase auth is not initialized");let e=w?l.F0:l.iM;await (0,l.oM)(n.j2,e);let t=await (0,l.x9)(n.j2,k.email,k.password),a=await (0,i.x7)((0,i.H9)(n.db,"users",t.user.uid));if(a.exists()){let e=a.data();if(e.role!==("institution"===c?"admin":"parent")){if("institution"===c&&"staff"===e.role);else throw await n.j2.signOut(),Error("선택하신 로그인 유형(학부모/기관)과 계정 권한이 일치하지 않습니다.")}"admin"===e.role||"staff"===e.role?R.push("/dashboard/admin"):R.push("/p/".concat(e.institutionId||"children-gate-church-01"))}else throw await n.j2.signOut(),Error("사용자 정보를 찾을 수 없습니다.")}catch(t){console.error("Login error:",t),S(t instanceof Error?t.message:e.auth.errorLogin)}finally{A(!1)}},q=async t=>{t.preventDefault(),A(!0),S("");try{if(!n.j2)throw Error("Firebase auth not ready");await (0,l.J1)(n.j2,P),L(!0)}catch(t){console.error("Reset password error:",t),S(e.auth.errorReset)}finally{A(!1)}},D=async()=>{A(!0),S("");try{if(!n.j2||!n.db)throw Error("Firebase auth not ready");let e=new l.HF,t=await (0,l.df)(n.j2,e),a=(0,i.H9)(n.db,"users",t.user.uid),s=await (0,i.x7)(a),r="institution"===c?"admin":"parent";if(s.exists()){let e=s.data();if(e.role!==r){if("institution"===c&&"staff"===e.role);else throw await n.j2.signOut(),Error("선택하신 로그인 유형(학부모/기관)과 계정 권한이 일치하지 않습니다.")}"admin"===e.role||"staff"===e.role?R.push("/dashboard/admin"):R.push("/p/".concat(e.institutionId||"children-gate-church-01"))}else{let e=Math.random().toString(36).substring(2,6).toUpperCase(),s="gate-".concat(e),l="admin"===r?s:"children-gate-church-01";await (0,i.BN)(a,{name:t.user.displayName||"Google User",email:t.user.email,role:r,institutionId:l,createdAt:new Date}),"admin"===r?(await (0,i.BN)((0,i.H9)(n.db,"institutions",s),{name:"New Institution (Google)",adminId:t.user.uid,createdAt:new Date}),R.push("/dashboard/admin")):R.push("/p/".concat(l))}}catch(t){console.error("Google Login error:",t),S(t instanceof Error?t.message:e.auth.errorLogin)}finally{A(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 relative",children:[(0,s.jsx)("div",{className:"absolute top-6 right-6",children:(0,s.jsxs)("button",{onClick:()=>a("ko"===t?"en":"ko"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full border bg-white border-black/10 text-xs font-bold hover:bg-black/5 transition-all text-black shadow-sm",children:[(0,s.jsx)(x.A,{size:14,className:"text-primary"}),"ko"===t?"EN":"KO"]})}),(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)(m.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-[40px] p-10 md:p-12 shadow-2xl shadow-black/5 border border-black/5",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white overflow-hidden rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-black/5 border border-black/5",children:(0,s.jsx)("img",{src:"/children_gate_logo.png",alt:"Children Gate Logo",className:"w-full h-full object-contain p-2"})}),(0,s.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-black mb-3",children:e.auth.loginTitle}),(0,s.jsx)("p",{className:"text-black/60 font-medium",children:e.auth.loginSubtitle})]}),(0,s.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex p-1 bg-gray-100 rounded-2xl mb-8",children:[(0,s.jsx)("button",{type:"button",className:"flex-1 py-3 text-sm font-bold rounded-xl transition-all ".concat("parent"===c?"bg-white text-primary shadow-sm":"text-black/50 hover:text-black"),onClick:()=>y("parent"),children:e.auth.tabParent}),(0,s.jsx)("button",{type:"button",className:"flex-1 py-3 text-sm font-bold rounded-xl transition-all ".concat("institution"===c?"bg-white text-primary shadow-sm":"text-black/50 hover:text-black"),onClick:()=>y("institution"),children:e.auth.tabInstitution})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-bold text-black ml-1 flex items-center gap-2",children:[(0,s.jsx)(h.A,{size:14,className:"text-primary"})," ",e.auth.email]}),(0,s.jsx)("input",{type:"email",required:!0,placeholder:"admin@institution.com",className:"w-full px-5 py-4 rounded-2xl bg-slate-50 border-none ring-2 ring-black/5 focus:ring-2 focus:ring-primary outline-none transition-all placeholder:text-black/20 text-black font-medium",value:k.email,onChange:e=>j({...k,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-bold text-black ml-1 flex items-center gap-2",children:[(0,s.jsx)(u.A,{size:14,className:"text-primary"})," ",e.auth.password]}),(0,s.jsx)("input",{type:"password",required:!0,placeholder:"••••••••",className:"w-full px-5 py-4 rounded-2xl bg-slate-50 border-none ring-2 ring-black/5 focus:ring-2 focus:ring-primary outline-none transition-all placeholder:text-black/20 text-black font-medium",value:k.password,onChange:e=>j({...k,password:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"rememberMe",checked:w,onChange:e=>N(e.target.checked),className:"w-4 h-4 text-primary bg-slate-50 border-black/10 rounded focus:ring-primary focus:ring-2 accent-primary cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"rememberMe",className:"text-sm font-bold text-black/60 cursor-pointer select-none",children:e.auth.rememberMe||"자동 로그인 (스마트폰 기억하기)"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{M(!0),E(k.email),S("")},className:"text-sm font-bold text-primary hover:underline underline-offset-4",children:e.auth.forgotPassword})]})]}),C&&(0,s.jsx)("p",{className:"text-error text-sm font-bold text-center bg-error/10 py-3 rounded-xl",children:C}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-black text-white py-5 rounded-2xl text-lg font-bold hover:bg-black/90 transition-all shadow-xl shadow-black/10 flex items-center justify-center gap-2 mt-4",children:v?e.auth.loggingIn:(0,s.jsxs)(s.Fragment,{children:[e.common.login," ",(0,s.jsx)(b.A,{size:20})]})}),(0,s.jsxs)("div",{className:"relative flex items-center py-2",children:[(0,s.jsx)("div",{className:"grow border-t border-black/10"}),(0,s.jsx)("span",{className:"shrink-0 px-4 text-black/30 text-xs font-bold uppercase tracking-widest",children:"OR"}),(0,s.jsx)("div",{className:"grow border-t border-black/10"})]}),(0,s.jsxs)("button",{type:"button",onClick:D,disabled:v,className:"w-full bg-white border border-black/10 text-black py-4 rounded-2xl text-base font-bold hover:bg-gray-50 transition-all flex items-center justify-center gap-3 shadow-sm",children:[(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 shrink-0",children:[(0,s.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,s.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,s.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,s.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.auth.googleLogin||"Google 계정으로 계속하기"]}),(0,s.jsxs)("p",{className:"text-center text-black/50 text-sm font-medium mt-8",children:[e.auth.noAccount," ",(0,s.jsx)(d(),{href:"/signup",className:"text-primary font-bold hover:underline underline-offset-4",children:e.common.signup})]})]})]}),(0,s.jsxs)("div",{className:"mt-12 flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6 text-[10px] font-black text-black/60 uppercase tracking-widest",children:[(0,s.jsx)(d(),{href:"/privacy",className:"hover:text-primary transition-colors",children:e.common.privacy}),(0,s.jsx)(d(),{href:"/terms",className:"hover:text-primary transition-colors",children:e.common.terms}),(0,s.jsx)("a",{href:"mailto:onchurchtx@gmail.com",className:"hover:text-primary transition-colors",children:e.common.contact})]}),(0,s.jsx)("p",{className:"text-center text-black/40 text-[10px] font-bold tracking-tight",children:"\xa9 2026 Children Gate. All Rights Reserved."})]})]}),z&&(0,s.jsx)("div",{className:"fixed inset-0 z-100 flex items-center justify-center p-6 bg-black/20 backdrop-blur-sm",children:(0,s.jsxs)(m.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"bg-white w-full max-w-sm rounded-[44px] p-8 md:p-10 shadow-2xl relative border border-black/5",children:[(0,s.jsx)("button",{onClick:()=>{M(!1),L(!1),S("")},className:"absolute top-6 right-6 w-10 h-10 flex items-center justify-center rounded-full bg-gray-50 text-black/40 hover:bg-gray-100 transition-all",children:(0,s.jsx)(p.A,{size:20})}),(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary/10 text-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(u.A,{size:32})}),(0,s.jsx)("h2",{className:"text-2xl font-black text-black mb-2",children:e.auth.resetPasswordTitle}),(0,s.jsx)("p",{className:"text-sm font-bold text-black/50 leading-relaxed",children:I?e.auth.resetLinkSent:e.auth.resetPasswordSubtitle})]}),I?(0,s.jsxs)("div",{className:"space-y-6 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(f.A,{size:32})})}),(0,s.jsx)("button",{onClick:()=>M(!1),className:"w-full bg-black text-white py-5 rounded-2xl text-base font-black hover:bg-black/90 transition-all shadow-xl shadow-black/10",children:e.auth.backToLogin})]}):(0,s.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-bold text-black ml-1 flex items-center gap-2",children:[(0,s.jsx)(h.A,{size:14,className:"text-primary"})," ",e.auth.email]}),(0,s.jsx)("input",{type:"email",required:!0,placeholder:"admin@institution.com",className:"w-full px-5 py-4 rounded-2xl bg-slate-50 border-none ring-2 ring-black/5 focus:ring-2 focus:ring-primary outline-none transition-all placeholder:text-black/20 text-black font-bold",value:P,onChange:e=>E(e.target.value)})]}),C&&(0,s.jsx)("p",{className:"text-error text-xs font-bold text-center bg-error/5 py-3 rounded-xl",children:C}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-black text-white py-5 rounded-2xl text-base font-black hover:bg-black/90 transition-all shadow-xl shadow-black/10 flex items-center justify-center gap-2",children:v?e.auth.creating:e.auth.sendResetLink})]})]})})]})}},44595:(e,t,a)=>{a.d(t,{db:()=>d,j2:()=>c});var s=a(49904),r=a(5877),l=a(83935);let i={apiKey:"AIzaSyDJm5vG3oeZUUMlVZXJqxkxo_dWE9SgPCc",authDomain:"schedulo-b0491.firebaseapp.com",projectId:"schedulo-b0491",storageBucket:"schedulo-b0491.firebasestorage.app",messagingSenderId:"1067549095640",appId:"1:1067549095640:web:822a85c7d3b16ead2cc9ad"},n=null;function o(){return n||(n=(0,s.Dk)().length>0?(0,s.Sx)():(0,s.Wp)(i)),n}let c=(0,r.xI)(o()),d=(0,l.aU)(o());o()}}]);